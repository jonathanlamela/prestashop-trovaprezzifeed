services:
  # Settings
  trovaprezzifeed.form.handler.configuration:
    class: 'TrovaprezziFeed\Form\FormHandler\ConfigurationFormHandler'
    public: true
    autowire: true
    autoconfigure: true

  #Form types
  trovaprezzifeed.form.type.configuration:
    class: 'TrovaprezziFeed\Form\Type\ConfigurationFormType'
    public: true
    tags: ['form.type']

  trovaprezzifeed.form.type.category_blacklist:
    class: 'TrovaprezziFeed\Form\Type\CategoryBlacklistType'
    public: true
    tags: ['form.type']
    arguments:
      - '@TrovaprezziFeed\Repository\TrovaprezziFeedRepository'

  trovaprezzifeed.form.type.supplier_blacklist:
    class: 'TrovaprezziFeed\Form\Type\SupplierBlacklistType'
    public: true
    tags: ['form.type']
    arguments:
      - '@TrovaprezziFeed\Repository\TrovaprezziFeedRepository'

  #Controllers
  TrovaprezziFeed\Controller\ConfigurationController:
    class: 'TrovaprezziFeed\Controller\ConfigurationController'
    public: true
    autowire: true
    autoconfigure: true
    tags: ['controller.service_arguments']

  TrovaprezziFeed\Controller\CategoryBlacklistController:
    class: 'TrovaprezziFeed\Controller\CategoryBlacklistController'
    public: true
    autowire: true
    autoconfigure: true
    tags: ['controller.service_arguments']

  TrovaprezziFeed\Controller\ProductBlacklistController:
    class: 'TrovaprezziFeed\Controller\ProductBlacklistController'
    public: true
    autowire: true
    autoconfigure: true
    tags: ['controller.service_arguments']

  TrovaprezziFeed\Controller\SupplierBlacklistController:
    class: 'TrovaprezziFeed\Controller\SupplierBlacklistController'
    public: true
    autowire: true
    autoconfigure: true
    tags: ['controller.service_arguments']

  # Repositories
  TrovaprezziFeed\Repository\TrovaprezziFeedRepository:
    public: true
    autowire: true
    autoconfigure: true

  # Grid Category
  # 1. Grid definition factory
  trovaprezzifeed.grid.definition.factory.category_blacklist:
    class: 'TrovaprezziFeed\Grid\DefinitionFactory\CategoryBlacklistGridDefinitionFactory'
    parent: 'PrestaShop\PrestaShop\Core\Grid\Definition\Factory\AbstractGridDefinitionFactory'
    public: true
    tags:
      - { name: 'prestashop.grid.definition.factory', grid_id: 'trovaprezzifeed_category_blacklist' }

  # 2. Query Builder
  trovaprezzifeed.grid.category_blacklist_query_builder:
    class: 'TrovaprezziFeed\Grid\QueryBuilder\CategoryBlacklistQueryBuilder'
    parent: "prestashop.core.grid.abstract_query_builder"
    public: true

  # 3. Data factory
  trovaprezzifeed.grid.data.factory.category_blacklist:
    class: 'PrestaShop\PrestaShop\Core\Grid\Data\Factory\DoctrineGridDataFactory'
    arguments:
      - '@trovaprezzifeed.grid.category_blacklist_query_builder' # Point 2
      - '@prestashop.core.hook.dispatcher'
      - '@prestashop.core.grid.query.doctrine_query_parser'
      - 'trovaprezzifeed_category_blacklist' # this should match grid id"

  # 4. Grid Factory
  trovaprezzifeed.grid.factory.category_blacklist:
    class: 'PrestaShop\PrestaShop\Core\Grid\GridFactory'
    arguments:
      - '@trovaprezzifeed.grid.definition.factory.category_blacklist'
      - '@trovaprezzifeed.grid.data.factory.category_blacklist'
      - '@prestashop.core.grid.filter.form_factory'
      - '@prestashop.core.hook.dispatcher'
    public: true

  # Grid Product
  # 1. Grid definition factory
  trovaprezzifeed.grid.definition.factory.product_blacklist:
    class: 'TrovaprezziFeed\Grid\DefinitionFactory\ProductBlacklistGridDefinitionFactory'
    parent: 'PrestaShop\PrestaShop\Core\Grid\Definition\Factory\AbstractGridDefinitionFactory'
    public: true
    tags:
      - { name: 'prestashop.grid.definition.factory', grid_id: 'trovaprezzifeed_product_blacklist' }

  # 2. Query Builder
  trovaprezzifeed.grid.product_blacklist_query_builder:
    class: 'TrovaprezziFeed\Grid\QueryBuilder\ProductBlacklistQueryBuilder'
    parent: "prestashop.core.grid.abstract_query_builder"
    public: true

  # 3. Data factory
  trovaprezzifeed.grid.data.factory.product_blacklist:
    class: 'PrestaShop\PrestaShop\Core\Grid\Data\Factory\DoctrineGridDataFactory'
    arguments:
      - '@trovaprezzifeed.grid.product_blacklist_query_builder' # Point 2
      - '@prestashop.core.hook.dispatcher'
      - '@prestashop.core.grid.query.doctrine_query_parser'
      - 'trovaprezzifeed_product_blacklist' # this should match grid id"

  # 4. Grid Factory
  trovaprezzifeed.grid.factory.product_blacklist:
    class: 'PrestaShop\PrestaShop\Core\Grid\GridFactory'
    arguments:
      - '@trovaprezzifeed.grid.definition.factory.product_blacklist'
      - '@trovaprezzifeed.grid.data.factory.product_blacklist'
      - '@prestashop.core.grid.filter.form_factory'
      - '@prestashop.core.hook.dispatcher'
    public: true

  # Grid Supplier
  # 1. Grid definition factory
  trovaprezzifeed.grid.definition.factory.supplier_blacklist:
    class: 'TrovaprezziFeed\Grid\DefinitionFactory\SupplierBlacklistGridDefinitionFactory'
    parent: 'PrestaShop\PrestaShop\Core\Grid\Definition\Factory\AbstractGridDefinitionFactory'
    public: true
    tags:
      - { name: 'prestashop.grid.definition.factory', grid_id: 'trovaprezzifeed_supplier_blacklist' }

  # 2. Query Builder
  trovaprezzifeed.grid.supplier_blacklist_query_builder:
    class: 'TrovaprezziFeed\Grid\QueryBuilder\SupplierBlacklistQueryBuilder'
    parent: "prestashop.core.grid.abstract_query_builder"
    public: true

  # 3. Data factory
  trovaprezzifeed.grid.data.factory.supplier_blacklist:
    class: 'PrestaShop\PrestaShop\Core\Grid\Data\Factory\DoctrineGridDataFactory'
    arguments:
      - '@trovaprezzifeed.grid.supplier_blacklist_query_builder' # Point 2
      - '@prestashop.core.hook.dispatcher'
      - '@prestashop.core.grid.query.doctrine_query_parser'
      - 'trovaprezzifeed_supplier_blacklist' # this should match grid id"

  # 4. Grid Factory
  trovaprezzifeed.grid.factory.supplier_blacklist:
    class: 'PrestaShop\PrestaShop\Core\Grid\GridFactory'
    arguments:
      - '@trovaprezzifeed.grid.definition.factory.supplier_blacklist'
      - '@trovaprezzifeed.grid.data.factory.supplier_blacklist'
      - '@prestashop.core.grid.filter.form_factory'
      - '@prestashop.core.hook.dispatcher'
    public: true
